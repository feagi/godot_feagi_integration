extends Node
class_name FEAGIAutomaticDeviceGenerator
## Some devices are not directly added by the user to their scenes, they are set to be created by the plugin directly. This node facilitates that


## Goes through device arrays, sees if any are calling for an automatically generated Godot Devices, and if so, create them
func add_all_autogenerated_objects(FEAGI_sensors: Dictionary, FEAGI_motors: Dictionary) -> void:
	for sensor_name in FEAGI_sensors:
		if FEAGI_sensors[sensor_name] is FEAGI_IOHandler_Sensory_Camera:
			if (FEAGI_sensors[sensor_name] as FEAGI_IOHandler_Sensory_Camera).automatically_create_screengrabber:
				var screenshoter: FEAGI_Device_Sensor_ScreenCapture = FEAGI_Device_Sensor_ScreenCapture.new()
				add_child(screenshoter)
				screenshoter.setup_screenshot_system((FEAGI_sensors[sensor_name] as FEAGI_IOHandler_Sensory_Camera).device_name)
				screenshoter.register_device()
				continue
	
	for motor_name in FEAGI_motors:
		if FEAGI_motors[motor_name] is FEAGI_IOHandler_Motor_MotionControl:
			if (FEAGI_motors[motor_name] as FEAGI_IOHandler_Motor_MotionControl).is_using_automatic_input_key_emulation():
				var input_emulators: FEAGI_Device_GodotInputEvents = FEAGI_Device_GodotInputEvents.new()
				add_child(input_emulators)
				input_emulators.setup_input_emulation((FEAGI_motors[motor_name] as FEAGI_IOHandler_Motor_MotionControl).device_name, (FEAGI_motors[motor_name] as FEAGI_IOHandler_Motor_MotionControl).automatically_emulate_keys)
				input_emulators.register_device()
				continue
